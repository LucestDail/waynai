# TripAmigo RAG 시스템 프롬프트 가이드

## 개요

이 문서는 TripAmigo 여행 코스 생성 시스템에서 RAG(Retrieval-Augmented Generation)를 활용한 프롬프트 작성 가이드입니다. 한국관광공사 API의 최신 관광지 정보를 활용하여 더 정확하고 최신화된 여행 코스를 생성합니다.

## 1. 관광 코스 생성 프롬프트

### 기본 구조
```
당신은 전문 여행 코스 설계사입니다. 다음 정보를 바탕으로 상세한 관광 코스를 생성해주세요.

=== 최신 관광지 정보 (RAG 기반) ===
[한국관광공사 API에서 가져온 최신 관광지 정보]

여행 정보:
- 목적지: [목적지]
- 여행 일수: [일수]일
- 테마: [테마]
- 예산: [예산]
- 교통수단: [교통수단]
- 관심사: [관심사]
- 여행 스타일: [여행스타일]

사용 가능한 관광지:
[기본 관광지 목록]

요구사항:
1. 위의 최신 관광지 정보를 우선적으로 참고하여 코스를 설계하세요.
2. 연관 관광지 정보를 활용하여 효율적인 코스를 구성하세요.
3. 각 일차별로 2-3개 관광지를 배정하세요.
4. 관광지 간 이동 시간을 고려하세요.
5. 식사 시간과 휴식 시간을 포함하세요.
6. 예산과 교통수단을 고려하세요.
7. JSON 형식으로 응답하세요.
```

### 상세 프롬프트 예시

#### 문화 테마 코스 생성
```
당신은 전문 여행 코스 설계사입니다. 다음 정보를 바탕으로 상세한 관광 코스를 생성해주세요.

=== 최신 관광지 정보 (RAG 기반) ===
【경복궁】
지역: 서울특별시 종로구
연관 관광지:
  • 창덕궁 (순위: 1) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 창경궁 (순위: 2) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 덕수궁 (순위: 3) - 관광지 > 문화관광 > 궁궐 (서울특별시 중구)
  • 국립중앙박물관 (순위: 4) - 관광지 > 문화관광 > 박물관 (서울특별시 용산구)
  • 북촌한옥마을 (순위: 5) - 관광지 > 문화관광 > 전통마을 (서울특별시 종로구)

【창덕궁】
지역: 서울특별시 종로구
연관 관광지:
  • 경복궁 (순위: 1) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 창경궁 (순위: 2) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 북촌한옥마을 (순위: 3) - 관광지 > 문화관광 > 전통마을 (서울특별시 종로구)
  • 인사동 (순위: 4) - 관광지 > 쇼핑 > 전통시장 (서울특별시 종로구)
  • 삼청동 (순위: 5) - 관광지 > 쇼핑 > 전통시장 (서울특별시 종로구)

여행 정보:
- 목적지: 서울
- 여행 일수: 3일
- 테마: 문화
- 예산: 30만원
- 교통수단: 지하철
- 관심사: 역사, 전통문화
- 여행 스타일: 느긋한

사용 가능한 관광지:
- 경복궁: 조선왕조의 정궁으로 아름다운 전통 건축물 (소요시간: 120분, 카테고리: 궁궐)
- 창덕궁: 유네스코 세계문화유산으로 지정된 아름다운 궁궐 (소요시간: 90분, 카테고리: 궁궐)
- 국립중앙박물관: 한국의 역사와 문화를 한눈에 볼 수 있는 박물관 (소요시간: 180분, 카테고리: 박물관)

요구사항:
1. 위의 최신 관광지 정보를 우선적으로 참고하여 코스를 설계하세요.
2. 연관 관광지 정보를 활용하여 효율적인 코스를 구성하세요.
3. 각 일차별로 2-3개 관광지를 배정하세요.
4. 관광지 간 이동 시간을 고려하세요.
5. 식사 시간과 휴식 시간을 포함하세요.
6. 예산과 교통수단을 고려하세요.
7. JSON 형식으로 응답하되, 다음 구조를 따르세요:
{
  "title": "코스 제목",
  "summary": "코스 요약",
  "dayPlans": [
    {
      "dayNumber": 1,
      "dayTitle": "1일차 제목",
      "overview": "1일차 개요",
      "spots": [
        {
          "spotName": "관광지명",
          "visitTime": "방문시간",
          "duration": 120,
          "activity": "활동내용",
          "notes": "참고사항"
        }
      ],
      "transportation": "교통수단",
      "meals": "식사 정보",
      "estimatedCost": "예상 비용",
      "tips": "일차별 팁"
    }
  ],
  "estimatedBudget": "총 예상 비용",
  "transportationInfo": "교통 정보",
  "accommodationInfo": "숙박 정보",
  "tips": ["전체 팁1", "전체 팁2"],
  "weatherInfo": "날씨 정보"
}
```

#### 자연 테마 코스 생성
```
당신은 전문 여행 코스 설계사입니다. 다음 정보를 바탕으로 상세한 관광 코스를 생성해주세요.

=== 최신 관광지 정보 (RAG 기반) ===
【남산타워】
지역: 서울특별시 용산구
연관 관광지:
  • 남산공원 (순위: 1) - 관광지 > 자연관광 > 공원 (서울특별시 용산구)
  • 남산도서관 (순위: 2) - 관광지 > 문화관광 > 도서관 (서울특별시 용산구)
  • 남산케이블카 (순위: 3) - 관광지 > 교통시설 > 케이블카 (서울특별시 용산구)
  • 남산골한옥마을 (순위: 4) - 관광지 > 문화관광 > 전통마을 (서울특별시 용산구)
  • 남산서울타워 (순위: 5) - 관광지 > 관광지 > 전망대 (서울특별시 용산구)

【한강공원】
지역: 서울특별시 영등포구
연관 관광지:
  • 여의도공원 (순위: 1) - 관광지 > 자연관광 > 공원 (서울특별시 영등포구)
  • 여의도한강공원 (순위: 2) - 관광지 > 자연관광 > 공원 (서울특별시 영등포구)
  • 여의도순복음교회 (순위: 3) - 관광지 > 종교관광 > 교회 (서울특별시 영등포구)
  • 여의도전망대 (순위: 4) - 관광지 > 관광지 > 전망대 (서울특별시 영등포구)
  • 여의도시장 (순위: 5) - 관광지 > 쇼핑 > 전통시장 (서울특별시 영등포구)

여행 정보:
- 목적지: 서울
- 여행 일수: 2일
- 테마: 자연
- 예산: 20만원
- 교통수단: 지하철 및 도보
- 관심사: 자연, 공원, 전망
- 여행 스타일: 활동적인

요구사항:
1. 위의 최신 관광지 정보를 우선적으로 참고하여 코스를 설계하세요.
2. 연관 관광지 정보를 활용하여 효율적인 코스를 구성하세요.
3. 자연과 관련된 관광지를 우선적으로 배정하세요.
4. 각 일차별로 2-3개 관광지를 배정하세요.
5. 관광지 간 이동 시간을 고려하세요.
6. 야외 활동에 적합한 시간대를 고려하세요.
7. JSON 형식으로 응답하세요.
```

## 2. 여행 팁 생성 프롬프트

### 기본 구조
```
다음 여행 정보와 최신 관광지 정보를 바탕으로 실용적인 여행 팁 5개를 한국어로 제공해주세요:

=== 최신 관광지 정보 ===
[한국관광공사 API에서 가져온 최신 관광지 정보]

여행 정보:
- 목적지: [목적지]
- 테마: [테마]
- 여행 일수: [일수]일
- 교통수단: [교통수단]
- 여행 스타일: [여행스타일]

각 팁은 한 줄로 간결하게 작성하고, 번호를 매겨주세요.
```

### 상세 프롬프트 예시

#### 문화 테마 여행 팁
```
다음 여행 정보와 최신 관광지 정보를 바탕으로 실용적인 여행 팁 5개를 한국어로 제공해주세요:

=== 최신 관광지 정보 ===
【경복궁】
지역: 서울특별시 종로구
연관 관광지:
  • 창덕궁 (순위: 1) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 창경궁 (순위: 2) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 덕수궁 (순위: 3) - 관광지 > 문화관광 > 궁궐 (서울특별시 중구)
  • 국립중앙박물관 (순위: 4) - 관광지 > 문화관광 > 박물관 (서울특별시 용산구)
  • 북촌한옥마을 (순위: 5) - 관광지 > 문화관광 > 전통마을 (서울특별시 종로구)

여행 정보:
- 목적지: 서울
- 테마: 문화
- 여행 일수: 3일
- 교통수단: 지하철
- 여행 스타일: 느긋한

각 팁은 한 줄로 간결하게 작성하고, 번호를 매겨주세요.
```

#### 자연 테마 여행 팁
```
다음 여행 정보와 최신 관광지 정보를 바탕으로 실용적인 여행 팁 5개를 한국어로 제공해주세요:

=== 최신 관광지 정보 ===
【남산타워】
지역: 서울특별시 용산구
연관 관광지:
  • 남산공원 (순위: 1) - 관광지 > 자연관광 > 공원 (서울특별시 용산구)
  • 남산케이블카 (순위: 2) - 관광지 > 교통시설 > 케이블카 (서울특별시 용산구)
  • 남산골한옥마을 (순위: 3) - 관광지 > 문화관광 > 전통마을 (서울특별시 용산구)

【한강공원】
지역: 서울특별시 영등포구
연관 관광지:
  • 여의도공원 (순위: 1) - 관광지 > 자연관광 > 공원 (서울특별시 영등포구)
  • 여의도한강공원 (순위: 2) - 관광지 > 자연관광 > 공원 (서울특별시 영등포구)
  • 여의도전망대 (순위: 3) - 관광지 > 관광지 > 전망대 (서울특별시 영등포구)

여행 정보:
- 목적지: 서울
- 테마: 자연
- 여행 일수: 2일
- 교통수단: 지하철 및 도보
- 여행 스타일: 활동적인

각 팁은 한 줄로 간결하게 작성하고, 번호를 매겨주세요.
```

## 3. 코스 설명 생성 프롬프트

### 기본 구조
```
다음 여행 정보와 최신 관광지 정보에 맞는 매력적인 코스 설명을 한국어로 작성해주세요:

=== 최신 관광지 정보 ===
[한국관광공사 API에서 가져온 최신 관광지 정보]

여행 정보:
- 목적지: [목적지]
- 테마: [테마]
- 여행 일수: [일수]일
- 교통수단: [교통수단]
- 여행 스타일: [여행스타일]

설명은 2-3문장으로 간결하게 작성하고, 여행의 매력점을 강조해주세요.
```

### 상세 프롬프트 예시

#### 문화 테마 코스 설명
```
다음 여행 정보와 최신 관광지 정보에 맞는 매력적인 코스 설명을 한국어로 작성해주세요:

=== 최신 관광지 정보 ===
【경복궁】
지역: 서울특별시 종로구
연관 관광지:
  • 창덕궁 (순위: 1) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 창경궁 (순위: 2) - 관광지 > 문화관광 > 궁궐 (서울특별시 종로구)
  • 덕수궁 (순위: 3) - 관광지 > 문화관광 > 궁궐 (서울특별시 중구)
  • 국립중앙박물관 (순위: 4) - 관광지 > 문화관광 > 박물관 (서울특별시 용산구)
  • 북촌한옥마을 (순위: 5) - 관광지 > 문화관광 > 전통마을 (서울특별시 종로구)

여행 정보:
- 목적지: 서울
- 테마: 문화
- 여행 일수: 3일
- 교통수단: 지하철
- 여행 스타일: 느긋한

설명은 2-3문장으로 간결하게 작성하고, 여행의 매력점을 강조해주세요.
```

## 4. 프롬프트 최적화 팁

### 1. 컨텍스트 우선순위 설정
- RAG에서 가져온 최신 관광지 정보를 프롬프트 상단에 배치
- 연관 관광지 순위 정보를 활용하여 우선순위 제시
- 지역별, 카테고리별 정보를 명확히 구분

### 2. 구체적인 요구사항 제시
- JSON 응답 형식을 명확히 지정
- 각 일차별 관광지 배정 개수 제한
- 이동 시간, 식사 시간 고려 요청
- 예산 및 교통수단 제약 조건 명시

### 3. 테마별 맞춤화
- 문화 테마: 역사적 배경, 전통 문화 강조
- 자연 테마: 야외 활동, 계절별 고려사항 강조
- 쇼핑 테마: 상권 정보, 쇼핑 팁 강조
- 음식 테마: 맛집 정보, 식사 시간 고려

### 4. 에러 처리 및 대안 제시
- RAG 정보가 부족한 경우 기본 정보 활용
- API 응답 실패 시 대체 로직 제공
- 사용자 입력 검증 및 기본값 설정

## 5. 지역 코드 매핑 가이드

### 주요 지역 코드
- 서울특별시: 11
- 부산광역시: 21
- 대구광역시: 22
- 인천광역시: 23
- 광주광역시: 24
- 대전광역시: 25
- 울산광역시: 26
- 세종특별자치시: 29
- 경기도: 31
- 강원특별자치도: 32
- 충청북도: 33
- 충청남도: 34
- 전라북도: 35
- 전라남도: 36
- 경상북도: 37
- 경상남도: 38
- 제주특별자치도: 39

### 주요 시군구 코드 (서울)
- 강남구: 11680
- 서초구: 11650
- 종로구: 11110
- 중구: 11140
- 용산구: 11170
- 성동구: 11200
- 광진구: 11215
- 동대문구: 11230
- 중랑구: 11260
- 성북구: 11290
- 강북구: 11305
- 도봉구: 11320
- 노원구: 11350
- 은평구: 11380
- 서대문구: 11410
- 마포구: 11440
- 양천구: 11470
- 강서구: 11500
- 구로구: 11530
- 금천구: 11545
- 영등포구: 11560
- 동작구: 11590
- 관악구: 11620
- 송파구: 11710
- 강동구: 11740

## 6. 성능 최적화 가이드

### 1. 캐싱 전략
- 관광지 정보 캐싱 (TTL: 1시간)
- 지역별 정보 캐싱 (TTL: 6시간)
- 연관 관광지 정보 캐싱 (TTL: 12시간)

### 2. 배치 처리
- 대량 관광지 정보 업데이트
- 지역별 정보 일괄 처리
- 카테고리별 정보 분류

### 3. 에러 처리
- API 호출 실패 시 재시도 로직
- 타임아웃 설정 (10초)
- 폴백 데이터 제공

### 4. 모니터링
- API 호출 성공률 모니터링
- 응답 시간 측정
- 에러 로그 분석

이 가이드를 참고하여 RAG 시스템을 활용한 효과적인 여행 코스 생성 프롬프트를 작성하시기 바랍니다. 